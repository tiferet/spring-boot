
name: "Code Scanning - Action"
on: push
jobs:
    CodeQL-Build:
        runs-on: ubuntu-latest

        permissions:
            # required for all workflows
            security-events: write

            # only required for workflows in private repositories
            actions: read
            contents: read

        steps:
            - name: Checkout repository
              uses: actions/checkout@v3

            # Initializes the CodeQL tools for scanning.
            - name: Initialize CodeQL
              uses: github/codeql-action/init@v2
              with:
                  languages: java

            # Build the project, including steps to (i) install tools (including compilers in the appropriate versions, 
            # package managers, and build tools), (ii) install dependencies, (iii) build the code.
            - name:
        Install JDK 17
        run: sudo apt-get install openjdk-17-jdk
      - name: Install Gradle
        run: sudo apt-get install gradle
      - name: Install plugins
        run: gradle plugins:base,org.jetbrains.kotlin.jvm,io.spring.nohttp
      - name: Configure nohttp task
        run: gradle nohttp --allowlistFile=src/nohttp
      - name: Build project
        run: gradle build


            # Analyze the project using CodeQL.
            - name: Perform CodeQL Analysis
              uses: github/codeql-action/analyze@v2
